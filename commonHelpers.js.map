{"version":3,"file":"commonHelpers.js","sources":["../src/js/api/ubookApi.js","../src/js/top-sellers.js"],"sourcesContent":["import axios from 'axios';\n\nconst baseUrl = 'https://books-backend.p.goit.global/books/';\n\nexport async function getDataBooks(endPoint, paramsRequest) {\n  try {\n    const response = await axios.get(baseUrl + endPoint, {\n      params: paramsRequest,\n    });\n    return response.data;\n  } catch (error) {\n    console.error(error);\n  }\n}\n","import { getDataBooks } from './api/ubookApi';\n\nconst booksList = document.getElementById('books-list');\n\n// отримання даних з серверу\nexport const getTopBooksData = async () => {\n  //run loading написати загрузку\n\n  try {\n    const topBooks = await getDataBooks('top-books'); // запит на сервер\n    const randomBooks = getRandomBooks(topBooks, 4); // вибираємо 4 випадкові книги\n    renderTopBooks(randomBooks); // рендер розмітки\n  } catch (err) {\n    console.error(err);\n  } finally {\n    // ховаємо лоадер\n  }\n};\n\ngetTopBooksData();\n\n//  функція для рандомного вибору 4 категорій з масиву книг\nfunction getRandomBooks(books, count) {\n  const randomIndexes = [];\n\n  while (randomIndexes.length < count) {\n    const randomIndex = Math.floor(Math.random() * books.length);\n    if (!randomIndexes.includes(randomIndex)) {\n      randomIndexes.push(randomIndex);\n    }\n  }\n\n  return randomIndexes.map(index => books[index]);\n}\n\n// рендер сторінки\nfunction renderTopBooks(topBooks) {\n  const fragment = createMarkUp(topBooks);\n  booksList.innerHTML = ''; // очищення вмісту перед додаванням нового\n  booksList.appendChild(fragment); // додавання фрагменту до DOM\n}\n\n// створення розмітки категорій книг\nfunction createMarkUp(results) {\n  const fragment = document.createDocumentFragment();\n\n  results.forEach(({ list_name, books }) => {\n    const li = document.createElement('li');\n    li.className = 'sellers-category';\n    li.innerHTML = `\n      <h2 class=\"sellers-category-title\">${list_name}</h2>\n      <ul class=\"sellers-category-list\">\n        ${generateListItems(books)}\n      </ul>\n      <button class=\"sellers-button\" type=\"button\">see more</button>\n    `;\n    fragment.appendChild(li);\n  });\n\n  return fragment;\n}\n\n// створення розмітки однієї книги\nfunction generateListItems(books) {\n  let items = '';\n  const screenSize = getScreenSize(); // визначення розміру екрану\n  const maxItems =\n    screenSize === 'desktop' ? 5 : screenSize === 'tablet' ? 3 : 1; // визначення кількості айтемів\n\n  for (let i = 0; i < maxItems && i < books.length; i++) {\n    const { book_image, title, author, _id } = books[i];\n    items += `\n      <li class=\"sellers-item\" data-id=\"${_id}\">\n        <div class=\"book-image-wrapper\">\n          <img class=\"book-image\"\n          src=\"${book_image}\"\n          alt=\"${title}\"\n          >\n        </div>\n        <h3 class=\"book-title\">${title}</h3>\n        <p class=\"book-author\">${author}</p>\n      </li>\n    `;\n  }\n\n  return items;\n}\n\n// визначення розмірів екрану\nfunction getScreenSize() {\n  const screenWidth = window.innerWidth;\n  if (screenWidth < 768) {\n    return 'mobile';\n  } else if (screenWidth < 1200) {\n    return 'tablet';\n  } else {\n    return 'desktop';\n  }\n}\n\n// визначення кількості елементів залежно від розміру екрану\nfunction getBooksCountByScreenSize(screenSize) {\n  switch (screenSize) {\n    case 'mobile':\n      return 1; // один елемент на мобільному\n    case 'tablet':\n      return 3; // три елементи на планшеті\n    case 'desktop':\n    default:\n      return 5; // п'ять елементів на десктопі\n  }\n}\n"],"names":["baseUrl","getDataBooks","endPoint","paramsRequest","axios","error","booksList","getTopBooksData","topBooks","randomBooks","getRandomBooks","renderTopBooks","err","books","count","randomIndexes","randomIndex","index","fragment","createMarkUp","results","list_name","li","generateListItems","items","screenSize","getScreenSize","maxItems","i","book_image","title","author","_id","screenWidth"],"mappings":"svBAEA,MAAMA,EAAU,6CAET,eAAeC,EAAaC,EAAUC,EAAe,CAC1D,GAAI,CAIF,OAHiB,MAAMC,EAAM,IAAIJ,EAAUE,EAAU,CACnD,OAAQC,CACd,CAAK,GACe,IACjB,OAAQE,EAAO,CACd,QAAQ,MAAMA,CAAK,CACpB,CACH,CCXA,MAAMC,EAAY,SAAS,eAAe,YAAY,EAGzCC,EAAkB,SAAY,CAGzC,GAAI,CACF,MAAMC,EAAW,MAAMP,EAAa,WAAW,EACzCQ,EAAcC,EAAeF,EAAU,CAAC,EAC9CG,EAAeF,CAAW,CAC3B,OAAQG,EAAK,CACZ,QAAQ,MAAMA,CAAG,CACrB,QAAY,CAET,CACH,EAEAL,IAGA,SAASG,EAAeG,EAAOC,EAAO,CACpC,MAAMC,EAAgB,CAAA,EAEtB,KAAOA,EAAc,OAASD,GAAO,CACnC,MAAME,EAAc,KAAK,MAAM,KAAK,SAAWH,EAAM,MAAM,EACtDE,EAAc,SAASC,CAAW,GACrCD,EAAc,KAAKC,CAAW,CAEjC,CAED,OAAOD,EAAc,IAAIE,GAASJ,EAAMI,CAAK,CAAC,CAChD,CAGA,SAASN,EAAeH,EAAU,CAChC,MAAMU,EAAWC,EAAaX,CAAQ,EACtCF,EAAU,UAAY,GACtBA,EAAU,YAAYY,CAAQ,CAChC,CAGA,SAASC,EAAaC,EAAS,CAC7B,MAAMF,EAAW,SAAS,yBAE1B,OAAAE,EAAQ,QAAQ,CAAC,CAAE,UAAAC,EAAW,MAAAR,CAAK,IAAO,CACxC,MAAMS,EAAK,SAAS,cAAc,IAAI,EACtCA,EAAG,UAAY,mBACfA,EAAG,UAAY;AAAA,2CACwBD,CAAS;AAAA;AAAA,UAE1CE,EAAkBV,CAAK,CAAC;AAAA;AAAA;AAAA,MAI9BK,EAAS,YAAYI,CAAE,CAC3B,CAAG,EAEMJ,CACT,CAGA,SAASK,EAAkBV,EAAO,CAChC,IAAIW,EAAQ,GACZ,MAAMC,EAAaC,IACbC,EACJF,IAAe,UAAY,EAAIA,IAAe,SAAW,EAAI,EAE/D,QAASG,EAAI,EAAGA,EAAID,GAAYC,EAAIf,EAAM,OAAQe,IAAK,CACrD,KAAM,CAAE,WAAAC,EAAY,MAAAC,EAAO,OAAAC,EAAQ,IAAAC,GAAQnB,EAAMe,CAAC,EAClDJ,GAAS;AAAA,0CAC6BQ,CAAG;AAAA;AAAA;AAAA,iBAG5BH,CAAU;AAAA,iBACVC,CAAK;AAAA;AAAA;AAAA,iCAGWA,CAAK;AAAA,iCACLC,CAAM;AAAA;AAAA,KAGpC,CAED,OAAOP,CACT,CAGA,SAASE,GAAgB,CACvB,MAAMO,EAAc,OAAO,WAC3B,OAAIA,EAAc,IACT,SACEA,EAAc,KAChB,SAEA,SAEX"}